{"ast":null,"code":"import axios from \"axios\";\nexport default {\n  data() {\n    return {\n      naverLogin: null\n    };\n  },\n  mounted() {\n    let userData = {};\n    this.naverLogin = new window.naver.LoginWithNaverId({\n      clientId: \"ZpkAE5YTiolSaFISr_CV\",\n      // 개발자센터에 등록한 Client ID\n      callbackUrl: \"http://localhost:8080/naverlogin\",\n      // 개발자센터에 등록한 callback Url\n      isPopup: true,\n      // 팝업을 통한 연동처리 여부\n      loginButton: {\n        color: \"green\",\n        type: 3,\n        height: 60\n      } // 로그인 버튼의 타입을 지정\n    });\n\n    // 설정 정보를 초기화 연동을 준비\n    this.naverLogin.init();\n    this.naverLogin.getLoginStatus(status => {\n      if (status) {\n        console.log(status);\n        console.log(this.naverLogin.user);\n\n        // 필수적으로 받아야하는 프로필 정보가 있다면 callback 처리 시점에 체크\n        var email = this.naverLogin.user.getEmail();\n        var nickname = this.naverLogin.user.getNickName();\n        var gender = this.naverLogin.user.getGender();\n        var age = this.naverLogin.user.getAge();\n        var profile_image = this.naverLogin.user.getProfileImage();\n        /* var mobile = this.naverLogin.user.getMobile(); */\n\n        userData = {\n          email,\n          nickname,\n          gender,\n          age,\n          profile_image\n        };\n        if (email == undefined || email == null) {\n          alert(\"이메일은 필수 정보입니다. 정보 제공을 동의해주세요.\");\n          // 사용자 정보 재동의를 위하여 다시 동의 페이지로 이동함\n          this.naverLogin.reprompt();\n          return;\n        }\n      } else {\n        console.log(\"callback 처리에 실패하였습니다.\");\n      }\n      if (nickname == undefined || nickname == null) {\n        alert(\"별명은 필수 정보입니다. 정보 제공을 동의해주세요.\");\n        // 사용자 정보 재동의를 위하여 다시 동의 페이지로 이동함\n        this.naverLogin.reprompt();\n        return;\n      } else {\n        console.log(\"callback 처리에 실패하였습니다.\");\n      }\n      if (gender == undefined || gender == null) {\n        alert(\"성별은 필수 정보입니다. 정보 제공을 동의해주세요.\");\n        // 사용자 정보 재동의를 위하여 다시 동의 페이지로 이동함\n        this.naverLogin.reprompt();\n        return;\n      } else {\n        console.log(\"callback 처리에 실패하였습니다.\");\n      }\n      if (age == undefined || age == null) {\n        alert(\"연령대는 필수 정보입니다. 정보 제공을 동의해주세요.\");\n        // 사용자 정보 재동의를 위하여 다시 동의 페이지로 이동함\n        this.naverLogin.reprompt();\n        return;\n      } else {\n        console.log(\"callback 처리에 실패하였습니다.\");\n      }\n      if (profile_image == undefined || profile_image == null) {\n        alert(\"프로필 이미지는 필수 정보입니다. 정보 제공을 동의해주세요.\");\n        // 사용자 정보 재동의를 위하여 다시 동의 페이지로 이동함\n        this.naverLogin.reprompt();\n        return;\n      } else {\n        console.log(\"callback 처리에 실패하였습니다.\");\n      }\n      this.naverlogin2(userData);\n\n      // window.location.href = '/';\n    });\n  },\n\n  methods: {\n    logout() {\n      const accessToken = this.naverLogin.accessToken.accessToken;\n      const url = '/oauth2.0/token?grant_type=delete&client_id=ZpkAE5YTiolSaFISr_CV&client_secret=J_ia7bQ3W_&access_token=${accessToken}&service_provider=NAVER';\n      axios.get(url).then(res => {\n        console.log(res.data);\n      });\n    },\n    naverlogin2(userData) {\n      const email = userData.email;\n      axios({\n        url: \"http://localhost:3000/auth/naverlogin\",\n        method: \"POST\",\n        data: {\n          email: userData.email,\n          nick: userData.nickname,\n          image: userData.profile_image,\n          sex: userData.gender,\n          agegroup: userData.age,\n          provider: 'naver'\n        }\n      }).then(async res => {\n        this.pullData(email);\n      });\n    },\n    pullData(email) {\n      axios({\n        url: \"http://localhost:3000/auth/naverData\",\n        method: \"POST\",\n        data: {\n          email: email\n        }\n      }).then(async res => {\n        localStorage.setItem('userID', res.data.email);\n        localStorage.setItem('userNick', res.data.nick);\n        localStorage.setItem('userImage', res.data.image);\n        localStorage.setItem('userProvider', res.data.provider);\n        window.location.href = '/';\n      });\n    }\n  }\n};","map":{"version":3,"names":["axios","data","naverLogin","mounted","userData","window","naver","LoginWithNaverId","clientId","callbackUrl","isPopup","loginButton","color","type","height","init","getLoginStatus","status","console","log","user","email","getEmail","nickname","getNickName","gender","getGender","age","getAge","profile_image","getProfileImage","undefined","alert","reprompt","naverlogin2","methods","logout","accessToken","url","get","then","res","method","nick","image","sex","agegroup","provider","pullData","localStorage","setItem","location","href"],"sources":["/Users/seoyeonju/Library/CloudStorage/OneDrive-계원예술대학교/풀스텍/weave-wego 2/vue_front/src/views/NaverLogin.vue"],"sourcesContent":["<template>\n  <div>\n    <div id=\"naverIdLogin\">\n      <button type=\"button\" @click=\"logout\">로그아웃</button>\n    </div>\n  </div>\n</template>\n<script>\nimport axios from \"axios\";\nexport default {\n  data(){\n    return {\n      naverLogin: null,\n    };\n  },\n  mounted() {\n    let userData = {};\n    this.naverLogin = new window.naver.LoginWithNaverId({\n      clientId: \"ZpkAE5YTiolSaFISr_CV\", // 개발자센터에 등록한 Client ID\n      callbackUrl: \"http://localhost:8080/naverlogin\", // 개발자센터에 등록한 callback Url\n      isPopup: true, // 팝업을 통한 연동처리 여부\n      loginButton: {\n        color: \"green\", type: 3, height: 60 },  // 로그인 버튼의 타입을 지정\n    });\n\n    // 설정 정보를 초기화 연동을 준비\n    this.naverLogin.init();\n\n    this.naverLogin.getLoginStatus((status) => {\n      if (status) {\n        console.log(status);\n        console.log(this.naverLogin.user);\n\n        // 필수적으로 받아야하는 프로필 정보가 있다면 callback 처리 시점에 체크\n        var email = this.naverLogin.user.getEmail();\n        var nickname = this.naverLogin.user.getNickName();\n        var gender = this.naverLogin.user.getGender();\n        var age = this.naverLogin.user.getAge();\n        var profile_image = this.naverLogin.user.getProfileImage();\n        /* var mobile = this.naverLogin.user.getMobile(); */\n        \n        userData = {email, nickname, gender, age, profile_image};\n\n        if (email == undefined || email == null) {\n          alert(\"이메일은 필수 정보입니다. 정보 제공을 동의해주세요.\");\n          // 사용자 정보 재동의를 위하여 다시 동의 페이지로 이동함\n          this.naverLogin.reprompt();\n          return;\n        }\n      } else {\n        console.log(\"callback 처리에 실패하였습니다.\");\n      }\n      \n      if (nickname == undefined || nickname == null) {\n          \n          alert(\"별명은 필수 정보입니다. 정보 제공을 동의해주세요.\");\n          // 사용자 정보 재동의를 위하여 다시 동의 페이지로 이동함\n          this.naverLogin.reprompt();\n          return;\n        } else {\n        console.log(\"callback 처리에 실패하였습니다.\");\n      }\n\n      if (gender == undefined || gender == null) {\n          alert(\"성별은 필수 정보입니다. 정보 제공을 동의해주세요.\");\n          // 사용자 정보 재동의를 위하여 다시 동의 페이지로 이동함\n          this.naverLogin.reprompt();\n          return;\n        } else {\n        console.log(\"callback 처리에 실패하였습니다.\");\n      }\n\n      if (age == undefined || age == null) {\n          alert(\"연령대는 필수 정보입니다. 정보 제공을 동의해주세요.\");\n          // 사용자 정보 재동의를 위하여 다시 동의 페이지로 이동함\n          this.naverLogin.reprompt();\n          return;\n        } else {\n        console.log(\"callback 처리에 실패하였습니다.\");\n      }\n\n      if (profile_image == undefined || profile_image == null) {\n          alert(\"프로필 이미지는 필수 정보입니다. 정보 제공을 동의해주세요.\");\n          // 사용자 정보 재동의를 위하여 다시 동의 페이지로 이동함\n          this.naverLogin.reprompt();\n          return;\n        } else {\n        console.log(\"callback 처리에 실패하였습니다.\");\n      }\n\n      this.naverlogin2(userData);\n\n      // window.location.href = '/';\n\n\n    });\n  },\n  methods: {\n    logout() {\n      const accessToken = this.naverLogin.accessToken.accessToken;\n      const url='/oauth2.0/token?grant_type=delete&client_id=ZpkAE5YTiolSaFISr_CV&client_secret=J_ia7bQ3W_&access_token=${accessToken}&service_provider=NAVER';\n\n      axios.get(url).then((res) => {\n        console.log(res.data);\n      });\n\n      \n\n    },\n    naverlogin2(userData) {\n            const email = userData.email;\n\n            axios({\n                url: \"http://localhost:3000/auth/naverlogin\",\n                method: \"POST\",\n                data: {\n                    email: userData.email,\n                    nick: userData.nickname,\n                    image: userData.profile_image,\n                    sex: userData.gender,\n                    agegroup: userData.age,\n                    provider: 'naver'\n                },\n\n            }).then(async (res)=> {\n                this.pullData(email)\n            })\n        },\n    pullData(email) {\n      axios({\n                url: \"http://localhost:3000/auth/naverData\",\n                method: \"POST\",\n                data: {\n                    email: email,\n                }\n            }).then(async (res)=> {\n                localStorage.setItem('userID', res.data.email);\n                localStorage.setItem('userNick', res.data.nick);\n                localStorage.setItem('userImage', res.data.image);\n                localStorage.setItem('userProvider', res.data.provider);\n\n                window.location.href = '/';\n            })\n    }\n  },\n};\n</script>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}